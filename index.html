<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Decorator Deluxe</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --panel-color: #2d2d2d;
            --accent-color: #f1c40f;
            --text-color: #ffffff;
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            transition: all 0.5s ease;
        }

        .header { text-align: center; margin-bottom: 20px; }

        .stats {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .slot-machine {
            background: var(--panel-color);
            padding: 20px;
            border-radius: 15px;
            border: 4px solid var(--accent-color);
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .reel {
            width: 80px;
            height: 100px;
            background: #fff;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #333;
            transition: transform 0.1s;
        }

        .controls { display: flex; gap: 10px; margin-bottom: 30px; }

        button {
            padding: 12px 20px;
            font-size: 1rem;
            cursor: pointer;
            background: var(--accent-color);
            color: #000;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            transition: transform 0.1s, opacity 0.3s;
        }

        button:hover { opacity: 0.9; }
        button:active { transform: scale(0.95); }
        button:disabled { background: #666; cursor: not-allowed; color: #ccc; }

        .shop-container {
            width: 100%;
            max-width: 700px;
            background: var(--panel-color);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .shop-item {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
        }

        .shop-item.owned { border-color: var(--accent-color); background: rgba(255,255,255,0.1); }

        .price-tag { display: block; font-size: 0.85rem; margin: 8px 0; color: var(--accent-color); }

        .msg { height: 24px; margin-top: 10px; color: var(--accent-color); font-weight: bold; font-size: 1.1rem; }
    </style>
</head>
<body>

    <div class="header">
        <h1>üé∞ Decorator Slots</h1>
        <div class="stats">Tokens: <span id="token-count">100</span></div>
        <div id="status-msg" class="msg">Welcome! Good luck!</div>
    </div>

    <div class="slot-machine">
        <div class="reel" id="reel1">üíé</div>
        <div class="reel" id="reel2">üíé</div>
        <div class="reel" id="reel3">üíé</div>
    </div>

    <div class="controls">
        <button class="spin-btn" onclick="spin(1)">Spin (10)</button>
        <button class="spin-btn" onclick="spin(5)" style="background: #e67e22;">Spin x5 (50)</button>
    </div>

    <div class="shop-container">
        <h3>üé® Theme Shop</h3>
        <div class="shop-grid" id="shop-grid"></div>
    </div>

    <script>
        let tokens = 100;
        const symbols = ['üçí', 'üçã', 'üîî', 'üíé', '7Ô∏è‚É£', 'üçÄ'];
        const inventory = ['default'];
        
        const shopItems = [
            { id: 'midnight', name: 'Midnight', price: 50, colors: { bg: '#0b0b0d', panel: '#1c1c1f', accent: '#e74c3c' } },
            { id: 'forest', name: 'Forest', price: 120, colors: { bg: '#1b3022', panel: '#2c5e3f', accent: '#2ecc71' } },
            { id: 'cyber', name: 'Cyberpunk', price: 250, colors: { bg: '#2b0035', panel: '#440055', accent: '#00fff2' } },
            { id: 'ocean', name: 'Deep Sea', price: 400, colors: { bg: '#001a33', panel: '#003366', accent: '#33ccff' } },
            { id: 'candy', name: 'Candy Land', price: 600, colors: { bg: '#ffafcc', panel: '#ffc8dd', accent: '#fb6f92' } },
            { id: 'cosmic', name: 'Cosmic Gold', price: 1000, colors: { bg: '#14111a', panel: '#241d33', accent: '#f1c40f' } }
        ];

        function updateUI() {
            document.getElementById('token-count').innerText = tokens;
            renderShop();
        }

        async function spin(count) {
            const cost = 10 * count;
            if (tokens < cost) {
                document.getElementById('status-msg').innerText = "Not enough tokens!";
                return;
            }

            tokens -= cost;
            updateUI();
            toggleButtons(true);

            let totalWon = 0;
            const status = document.getElementById('status-msg');

            // Animation and logic loop
            for (let i = 0; i < count; i++) {
                status.innerText = count > 1 ? `Spinning ${i + 1}/${count}...` : "Spinning...";
                
                // Visual roll
                await animateReels(200 + (i * 50)); 
                
                // Calculate Result
                const results = [
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)]
                ];

                // Set final symbols
                document.getElementById('reel1').innerText = results[0];
                document.getElementById('reel2').innerText = results[1];
                document.getElementById('reel3').innerText = results[2];

                // Calculate Payout
                if (results[0] === results[1] && results[1] === results[2]) {
                    totalWon += 100;
                } else if (results[0] === results[1] || results[1] === results[2] || results[0] === results[2]) {
                    totalWon += 20;
                }
            }

            tokens += totalWon;
            status.innerText = totalWon > 0 ? `Total Won: ${totalWon} Tokens!` : "No luck this time!";
            toggleButtons(false);
            updateUI();
        }

        function animateReels(duration) {
            return new Promise(resolve => {
                const startTime = Date.now();
                const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];
                
                const timer = setInterval(() => {
                    reels.forEach(r => r.innerText = symbols[Math.floor(Math.random() * symbols.length)]);
                    if (Date.now() - startTime >= duration) {
                        clearInterval(timer);
                        resolve();
                    }
                }, 50);
            });
        }

        function toggleButtons(disabled) {
            document.querySelectorAll('.spin-btn').forEach(btn => btn.disabled = disabled);
        }

        function renderShop() {
            const grid = document.getElementById('shop-grid');
            grid.innerHTML = '';

            shopItems.forEach(item => {
                const isOwned = inventory.includes(item.id);
                const div = document.createElement('div');
                div.className = `shop-item ${isOwned ? 'owned' : ''}`;
                
                div.innerHTML = `
                    <strong>${item.name}</strong>
                    <span class="price-tag">${isOwned ? 'OWNED' : item.price + ' Tkn'}</span>
                    <button onclick="${isOwned ? `applyTheme('${item.id}')` : `buyItem('${item.id}')`}" 
                            style="font-size: 0.8rem; padding: 5px 10px; width: 100%;">
                        ${isOwned ? 'Apply' : 'Buy'}
                    </button>
                `;
                grid.appendChild(div);
            });
        }

        function buyItem(id) {
            const item = shopItems.find(i => i.id === id);
            if (tokens >= item.price) {
                tokens -= item.price;
                inventory.push(id);
                document.getElementById('status-msg').innerText = `Unlocked ${item.name}!`;
                updateUI();
            } else {
                document.getElementById('status-msg').innerText = "Insufficient tokens!";
            }
        }

        function applyTheme(id) {
            const item = shopItems.find(i => i.id === id);
            document.documentElement.style.setProperty('--bg-color', item.colors.bg);
            document.documentElement.style.setProperty('--panel-color', item.colors.panel);
            document.documentElement.style.setProperty('--accent-color', item.colors.accent);
            document.getElementById('status-msg').innerText = `${item.name} theme active!`;
        }

        updateUI();
    </script>
</body>
</html>
